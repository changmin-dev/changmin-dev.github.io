---
laytout: post
title: 2018년 6월 19일 TIL
tags: [TIL]
---

## 힙
완전 이진트리이고 Heap Property를 만족하는 자료구조 Max와 Min이 있다. Max힙은 부모가 자식보다 항상 커야한다. Min힙은 그 반대이다. 논리적으로는 이진트리로 나타내지만, 실제로는 배열로 구현된다.

### 힙의 생성
Heapify를 크기/2 부터 시작해서 2번까지 반복한다.

## Java

### Queue의 offer, poll
다른 컬렉션과 같이 add, remove가 가능하지만 이것은 예외를 던진다. offer는 add대신 사용할수있고 삽입에 실패하면 false를 반환한다. poll은 remove대신 사용하고 삭제에 실패하면 null을 리턴한다.

## 네트워크
### 브라우저에서 서버까지(강조 된것은 기억 나지 않았던 부분)
웹페이지에 접속을 하기위해 URL을 입력하면 브라우저는 URL을 해석한다. 서버의 도메인을 DNS 리졸버를 통해서 아이피 주소를 얻는다. DNS 리졸버는 로컬 DNS서버로 가서 확인하고 없으면 상위의 DNS서버로 올라가서 확인한다. 루트 도메인 서버까지 갈 수도 있다. 아이피를 획득 했으니 TCP요청을 하기 위해서 TCP 소켓을 이용해서 `소켓을 만들어 Connect()한다.` 포트는 HTTP라면 80, HTTPS라면 443포트를 이용한다. HTTPS는 SSL을 이용한 HTTP로 처음에 서버에 접속하면 인증서와 공개키를 받게된다. 브러우저는 이미 인증서에 대한 정보를 가지고 있고 신뢰할수 있는 인증서라면 공개키로 공유키를 암호화 해서 전달한다. 서로 데이터를 공유키로 암호화해서 전달해 안전한 통신을 하게된다. 3way 핸드 쉐이크로 연결되고 맥 주소를 이용해서 게이트웨이 장치를 간다. 맥에서 게이트웨이의 위치를 아는 법은 ARP를 사용한다. `ARP테이블의 내용을 참조하는 방법이다. ARP테이블은 브로드 캐스트를 보내서 얻는다.` 맥과 게이트웨이는 스위치로 연결되어 있다.
게이트 웨이를 나오면 라우터에 의해서 서버측 게이트웨이로 전송된다. 이때 여러 라우터를 경유하게 되는데 경유하는 라우터의 수를 홉이라고한다. 라우터는 홉수와 최장일치의 룰을 이용해서 경로를 결정하게 된다. 경로는 라우팅 테이블에 적혀진다. 요청된 정보가 이미 캐싱되어 있다면 캐싱된 정보로 바로 응답되게 되거 게이트웨이에서 서버측 컴퓨터로 요청이 전달된다. 다시 케이블을 타고 들어와서 포트를 찾아서 들어가서 요청을 받는다. 받은 요청에 대한 응답은 다시 같은 과정을 거쳐서 클라이언트인 웹브라우저에게 전달돤다.

### 메시지 변화
HTTP 메시지 -> TCP 세그먼트 -> IP 패킷 -> 이더넷 프레임

### OSI 7계층 간략 설명
1. 물리계층 : 통신 메체와 신호에 대한 결정. ex)동축 케이블, 802.11
2. 데이터 링크 계층 : 기기간의 연결을 담당. ex)MAC
3. 네트워크 계층 : 네트워크 끼리의 연결을 담당. ex)IP
4. 트랜스포트 계층 : 어플리케이션을 구분. ex)TCP
5. 세션계층 : 연결 설정 및 해제 어떻게 할것인지를 결정. ex)Socket
6. 프레젠테이션 계층 : 데이터를 어떻게 표현할것인가를 결정. ex)SSL
7. 어플리케이션 계층 : 어플리케이션 간의 통신을 어떻게 할것인가? ex)HTTP

## TCP
### 3Way handShake
Syn을 보내고 Syn/Ack를 받고 Ack를 보냄으로써 연결을 수립힌다. 이떄 일련 번호와 최대 세그먼트 크기를 서로 보내면서 조절한다. 작은 값을 따라간다. 일련번호는 1이 증가한다.

### 데이터 전송
데이터를 전송할때마다 전송한 만큼 일련 번호를 증가 시킨다. 수신한 만큼 확인 응답번호를 증가시킨다. 응답을 받지 못하면 재전송한다.

### 연속적인 데이터 전송
응답을 기다리지 않고 연속으로 데이터를 보낼수 있다. 동일한 응답 번호가 계속 들어오면 전송이 실패한것으로 간주한다.

### 누락된 데이터 전송
누락된 부분 부터 다시 재전송하거나 지원이 된다면, 누락된 부분만 선택적으로 재전송 가능하다.

### 흐름제어
버퍼의 크기(윈도우 사이즈)를 전달해서 전송량을 조정한다. 버퍼가 가득차면 송신측에서 윈도우 프로브 패킷을 보내고 계속 윈도우 사이즈는 응답을 받는다. 버퍼가 빈것을 확인하고 다시 보낸다. 

## UDP
UDP의 특징은 별다른 제어를 하지 않는다는 점과 브로드 캐스트와 멀티 캐스트가 가능하다는 점이다. 제어가 필요하면 어플리케이션 계층에서 한다.