---
laytout: post
title: 2018년 6월 17일 TIL
tags: [TIL]
---

## Java
GC의 Stop the world 같은 개념을 다시 보고 있다. 처음에 접했을때는 제임스 고슬링이 죠죠의 기묘한 모험이라도 본게 아닌지 학우들과 이야기 했었다. 아마 노래에서 가져온거 같다.

### GC의 Stop the world
GC가 발생하면 GC를 수행하는 쓰레드를 제외하고는 모든 쓰레드가 멈추게된다. 이를 Stop the world라고 한다.

### 자바의 제너릭과 C++의 템플릿 차이
자바의 제너릭은 컴파일시에 제너릭 부분이 사라지고 템플릿은 생성된다.

### TreeMap, HashMap, LinkendHashMap의 차이
TreeMap은 레드 블랙 트리로 되어 있다. 삽입과 검색에 O(logN)이 소요된다. 키는 정렬 되어 있다. 때문에 Comparable 인터페이스를 구현하고 있어야 한다.
HashMap은 해쉬를 이용한다. O(1)으로 검색이 가능하지만, 순서가 섞여 있다.
LinkedHashMap은 검색과 삽입에 O(1)이 소요된다. 키는 삽입된 순서로 되어있다. 

### 자바의 리플랙션
클래스의 필드와 메소드 정보를 실행시간에 동적으로 얻을 수 있다.
1. 프로그램이 어떻게 동작하는지 실행시간에 관측하고 조정할 수 있도록 해준다.
2. 메서드나 생성자 필드에 직접 접근할 수 있기 때문에 디버깅이나 테스트에 유용하다.
3. 이름을 이용해서 객체를 생성하고 메서드를 호출할 수 있다. 사용자에 의해서 특정 객체를 생성하거나 메서드를 호출해야 하는 상황에 유용하다.

### 자바 직렬화
객체를 JSON이나 바이트로 바꾸는 방법 Serializable 인터페이스를 상속 받는다. 시스템 끼리 통신을 주고 받기 위해서 사용한다. 서로 알아볼 수 있는 형태로 변환 시켜야 하므로 직렬화를 사용한다. 

### 자바의 클래스 로딩
어떤 메소드가 호출 되는 코드를 만났는데 그 메소드를 가진 클래스가 아직 로딩된적이 없다면 JVM은 JRE라이브러리 폴더에서 클래스를 찾고 없으면 CLASSPATH로 지정된 폴더에서 찾는다. 찾았다면 그 클래스 파일이 올바른지 바이트 코드를 검증하고 올바른 바이트 코드라면 로딩한다. 클래스 객체를 만드라는 명령어가 있으면 메소드 영역에 준비한다. 클래스 블록이 있으면 블록을 실행한다.

## OS
### 프로세스와 스레드
프로세스는 실행중인 프로그램이다. 스레드는 프로세스 내부에서의 실행의 흐름이다. 스레드는 스택을 제외하고는 PCB의 요소들을 공유하지만, 프로세스는 전부 독립적이다. 프로세스는 생성에 비용이커서 스레드를 많이 사용하는 편이다.

### 교착 상태의 4가지 조건
1. 상호배제 : 한 실행 주체만 자원을 사용가능하다.
2. Hold and wait : 여러 자원이 필요한 실행 주체가 자원의 일부를 서로 가지고 요청하는 상태
3. 비선점 : 다른 실행 주체가 가지고 있는 자원을 뺏을 수 없다.
4. 자원 사이클 : 어떤 자원에 대하여 여러 실행 주체가 그 자원을 획득하기 위해 대기하는 현상

### 메모리 계층
레지스터 - 캐쉬 - 메인 메모리 - 물리 디스크

### 메모리 할당 알고리즘
- first fit : 가장 먼저 만나는 메모리의 빈공간에 할당한다. 
- next fit : 인덱스가 이전에 참조한 공간 부터 체크
- best fit : 가장 남는 공간이 적은 메모리 공간에 할당한다.
- worst fit : 가장 공간이 많이 남는 메모리공간에 할당한다.

### 페이지 교체 알고리즘
요청되는 데이터가 캐시에 없을때를 페이지 폴트라고한다.
- fifo : 순서대로 교체한다. 가장 먼저 들어 왔던 페이지를 제거한다.
- lru : 가장 최근에 사용한 페이지를 보존하고 사용 시점이 오래된 것을 제거한다.
- lfu : 가장 사용 빈도가 높은 페이지를 보존하고 빈도가 낮은 것을 제거한다.
- opt : 가장 나중에 사용되지 않을 페이지를 교체  

### 외부 단편화와 내부 단편화
외부 단편화 : 메모리 할당을 하려는 데 할당을 못한 상황. 데이터의 크기만큼 외부 단편화라고 한다.
내부 단편화 : 메모리 할당을 했지만 남는 공간이 있는 경우. 할당되었지만, 들어가지 못한 공간만큼 내부 단편화라고 한다. 

### 페이지와 세그먼트
메모리를 나누는 방법
- 페이지: 일정한 단위를 정해서 데이터를 조작하는 것이고 물리메모리의 경우는 프레임, 논리메모리의 경우 페이지라고 한다. 페이지 테이블에는 페이지의 번호들과 프레임의 시작주소가 대응되어 있다. 요청된 크기가 페이지와 맞아 떨어지지 않을 수 있는데 그러면 남는 공간이 발생한다. 이것이 내부 단편화이다.
- 세그먼트: 원하는 만큼 데이터를 조작하는 것이다. Base + Offset의 방식이다. 때문에 기준과 크기가 세그먼트 테이블에 저장된다. 사이즈가 다르게 할당되어서 빈틈에 할당이 되지 못하는 외부 단편화가 발생할 수 있다.

### 뮤텍스와 세마포어
뮤텍스와 세마포어 둘다 공유자원의 제어를 위한 방법이다. 뮤텍스가 On/Off 방식이라면 세마포어는 개수를 가지고 있다. 뮤텍스를 이진 세마포어 라고도 한다. 뮤텍스는 하나의 임계구역에 여러 프로세스 혹은 스레드가 접근하는 것을 막는다.
- 세마포어 : 세마포어의 값을 감소시키는 P(S)연산, 세마포어의 카운팅 값을 감소시키는 V(S)연산이 있다. P(S)에서 세마포어가 0보다 작으면 프로세스를 대기시키고 V(S)에서 0보다 작거나 같으면 프로세스를 깨운다. 

### RISC와 CISK
인텔의 CPU의 명령어 셋이 대표적인 CISK구조 인데 이런 명령어는 복잡하다. 때문에 RISC 명령어가 나왔다. RISC는 Reduce Instruction Set Computer라는 의미로 메모리에 접근하는 것은 무조건 Load, Store명령으로만 가능하도록 해서 명령어를 단순화 시켰다. 대신에 RISK는 레지스터가 많아야한다.

### Context Switching
어떤 기능을 실행중인 상황에서 다른 상황으로 옮겨가는 것. 보통 프로세스 간의 전환을 의미한다. 이때 프로세스는 PC와 정보들을 레지스터 에 백업한다. 이후 다른 프로세스의 정보가 PCB에 적재되고 CPU에 의해 실행된다.

### PCB의 내용
- 프로세스 식별자(PID)
- 프로세스 상태(생성, 준비, 실행, 대기, 완료)
- PC
- 레지스터 정보
- 프로세스 스케줄링 정보(우선순위, 점유시간 등)
- 메모리 관리 정보(프로세스의 주소 공간 등)
- 입출력 상태 정보(파일이 열려있는지 여부, 입출력 장치 정보 등)

### 동기화
분산 되어 있는 곳들의 정보를 일치하는 것 캐시를 사용하는 경우나 스케일 아웃 한경우 사용한다.

## 객체지향 설명
객체지향은 시스템을 객체들의 상호 작용으로 나타내는 방법이다. 각 객체는 역할과 책임을 가지고 있다. 자동차라는 객체는 자동차 역할을 가지고 있다. 자동차는 출발하고 정지하는 책임을 가진다. 모터라는 역할을 가진 객체는 가속하는 크기를 결정하는 책임을 가진다. 자동차는 출발할때 모터에게 가속을 요청한다. 이를 통해서 상호 작용한다. 추상화 자동차 객체는 실제 자동차가 아닌 필요한 정보만 가져온 것이다. 이를 추상화라고 한다. 모터는 사실 Good모터와 Normal모터가 있다. Good모터는 모터를 상속 받아서 구현한다. Good모터의 가속 모터가 가속을 한다면 Good모터와 Normal모터의 형태는 다를 것이다. 똑같이 가속을 하지만, 동작은 다르다 이를 다형성이라고 한다. 
자동차는 Good모터 내부가 어떻게 되어 있는지 모른다. 인터페이스를 이용해 요청을 보낼 뿐이다. 그리고 모터는 가속양 정보과 가속이라는 동작을 가지고 있다. 이를 캡슐화라고 한다.

## 레드 블랙 트리
루트는 블랙으로 시작하고 입력 되는 노드는 모두 레드이다. 블랙과 레드가 반복 되어야 한다 그렇지 못하면 재구축 혹은 재색칠 되어야 한다.
이는 부모의 형제노드의 색깔을 보고 결정한다.
### 재구축(Restructuring)
부모의 형제노드의 색깔이 검정인 경우 수행한다. 해당 노드와 노드의 부모와 부모의 부모의 값을 정렬하고 가운데 값을 부모로 만든다. 자식의 색을 바꾼다.
### 재색칠(Recoloring)
부모의 형제노드의 색깔이 레드인 경우 수행한다.
해당 노드의 부모와 부모의 형제(엉클)를 검정으로 하고 부모의 부모를 빨강으로 한다. 이 경우 다시 Double Red가 발생할 수 있다. 

## 네트워크

### 스위치와 라우터의 차이점
스위치는 네트워크를 만들고 라우터는 네트워크 끼리의 연결을 한다.